(()=>{"use strict";var e={1609:e=>{e.exports=window.React},6427:e=>{e.exports=window.wp.components},9491:e=>{e.exports=window.wp.compose},7143:e=>{e.exports=window.wp.data},4309:e=>{e.exports=window.wp.editPost},7723:e=>{e.exports=window.wp.i18n},2279:e=>{e.exports=window.wp.plugins}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(1609),t=o(6427),s=o(9491),r=o(7143),i=o(4309),n=o(7723),l=o(2279);const a=window.VipWorkflowCustomStatuses.map((e=>({label:e.name,value:e.slug})));let u=null,d=!1;function p(e){e&&e.children<1&&(e.innerText===(0,n.__)("Save Draft")||e.innerText===(0,n.__)("Save as Pending"))&&(e.innerText=(0,n.__)("Save"))}(0,r.subscribe)((function(){if(!(0,r.select)("core/editor").getCurrentPostId())return;(0,r.select)("core/editor").isCleanNewPost()&&(0,r.dispatch)("core/editor").editPost({status:a[0].value}),p(document.querySelector(".editor-post-save-draft")),null===u&&window.MutationObserver&&(0,r.select)("core/editor").isSavingPost()&&(u=function(e){if(!e)return null;const t=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)p(e)}));return t.observe(e,{childList:!0}),t}(document.querySelector(".edit-post-header__settings")));const e=(0,r.select)("core/editor").getEditedPostAttribute("status");vw_publish_guard_enabled&&e!==a[a.length-1].value&&!d?(d=!0,(0,r.dispatch)("core/editor").lockPostSaving("vip-workflow")):vw_publish_guard_enabled&&e!==a[a.length-1].value||!d||(d=!1,(0,r.dispatch)("core/editor").unlockPostSaving("vip-workflow"))}));const c=(0,s.compose)((0,r.withSelect)((e=>({status:e("core/editor").getEditedPostAttribute("status")}))),(0,r.withDispatch)((e=>({onUpdate(t){e("core/editor").editPost({status:t})}}))))((({onUpdate:o,status:s})=>(0,e.createElement)(i.PluginPostStatusInfo,{className:`vip-workflow-extended-post-status vip-workflow-extended-post-status-${s}`},(0,e.createElement)("h4",null,"publish"!==s?(0,n.__)("Extended Post Status","vip-workflow"):(0,n.__)("Extended Post Status Disabled.","vip-workflow")),"publish"!==s?(0,e.createElement)(t.SelectControl,{label:"",value:s,options:a,onChange:o}):null,(0,e.createElement)("small",{className:"vip-workflow-extended-post-status-note"},"publish"!==s?(0,n.__)("Note: this will override all status settings above.","vip-workflow"):(0,n.__)("To select a custom status, please unpublish the content first.","vip-workflow"),s!==a[a.length-1].value?(0,n.__)(" This post is currently locked from publishing due to it's status.","vip-workflow"):""))));(0,l.registerPlugin)("vip-workflow-custom-status",{icon:"vip-workflow",render:c})})()})();
//# sourceMappingURL=custom-status-block.js.map