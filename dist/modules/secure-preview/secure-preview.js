(()=>{"use strict";var e={6772:(e,r,t)=>{t.d(r,{A:()=>i});var o=t(5573),n=t(4848);const i=(0,n.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.625 5.5h9.75c.069 0 .125.056.125.125v9.75a.125.125 0 0 1-.125.125h-9.75a.125.125 0 0 1-.125-.125v-9.75c0-.069.056-.125.125-.125ZM4 5.625C4 4.728 4.728 4 5.625 4h9.75C16.273 4 17 4.728 17 5.625v9.75c0 .898-.727 1.625-1.625 1.625h-9.75A1.625 1.625 0 0 1 4 15.375v-9.75Zm14.5 11.656v-9H20v9C20 18.8 18.77 20 17.251 20H6.25v-1.5h11.001c.69 0 1.249-.528 1.249-1.219Z"})})},1020:(e,r,t)=>{var o=t(1609),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};r.jsx=function(e,r,t){var o,a={},p=null,c=null;for(o in void 0!==t&&(p=""+t),void 0!==r.key&&(p=""+r.key),void 0!==r.ref&&(c=r.ref),r)i.call(r,o)&&!s.hasOwnProperty(o)&&(a[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===a[o]&&(a[o]=r[o]);return{$$typeof:n,type:e,key:p,ref:c,props:a,_owner:l.current}}},4848:(e,r,t)=>{e.exports=t(1020)},1609:e=>{e.exports=window.React},1455:e=>{e.exports=window.wp.apiFetch},4715:e=>{e.exports=window.wp.blockEditor},6427:e=>{e.exports=window.wp.components},9491:e=>{e.exports=window.wp.compose},7143:e=>{e.exports=window.wp.data},4309:e=>{e.exports=window.wp.editPost},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n},692:e=>{e.exports=window.wp.notices},2279:e=>{e.exports=window.wp.plugins},5573:e=>{e.exports=window.wp.primitives}},r={};function t(o){var n=r[o];if(void 0!==n)return n.exports;var i=r[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e=t(1609),r=t(1455),o=t.n(r),n=t(4715),i=t(6427),l=t(9491),s=t(7143),a=t(4309),p=t(6087),c=t(7723),w=t(6772),u=t(692),d=t(2279);const v=({onUrl:r})=>{const[t,n]=(0,p.useState)(!1);return(0,e.createElement)(e.Fragment,null,t&&(0,e.createElement)(i.Spinner,null),!t&&(0,e.createElement)(i.Button,{className:"vip-workflow-secure-preview-button",variant:"secondary",onClick:async()=>{let e={};try{n(!0),e=await o()({url:VW_SECURE_PREVIEW.url_generate_preview,method:"POST"})}catch(e){const r=VW_SECURE_PREVIEW.text_preview_error+" "+e.message;(0,s.dispatch)(u.store).createErrorNotice(r,{id:"vw-secure-preview",isDismissible:!0})}finally{n(!1)}e?.url&&r(e.url)}},(0,c.__)("Generate Link","vip-workflow")))},f=({url:r})=>{const t=(0,p.useRef)(null),o=(0,l.useCopyToClipboard)(r,(()=>{(0,s.dispatch)(u.store).createNotice("info",(0,c.__)("Link copied to clipboard."),{isDismissible:!0,type:"snackbar"})})),a={anchorRef:t,placement:"left-start",offset:36,shift:!0},d="/"+r.split("/").pop();return(0,e.createElement)("div",{className:"vip-workflow-secure-preview-dropdown",ref:t},(0,e.createElement)(i.Dropdown,{popoverProps:a,focusOnMount:!0,renderToggle:({onToggle:r})=>(0,e.createElement)(i.Button,{size:"compact",variant:"tertiary",onClick:r},(0,e.createElement)(i.__experimentalTruncate,{limit:15,ellipsizeMode:"tail"},d)),renderContent:({onClose:t})=>(0,e.createElement)("div",{className:"vip-workflow-secure-link-dropdown-content"},(0,e.createElement)(n.__experimentalInspectorPopoverHeader,{title:(0,c.__)("Secure Preview Link"),onClose:t}),(0,e.createElement)(i.ExternalLink,{className:"editor-post-url__link",href:r,target:"_blank"},r))}),(0,e.createElement)(i.Button,{icon:w.A,label:(0,c.sprintf)(
// Translators: %s is a placeholder for the link URL, e.g. "Copy link: https://example.com".
// Translators: %s is a placeholder for the link URL, e.g. "Copy link: https://example.com".
(0,c.__)("Copy link: %s"),r),ref:o,size:"compact"}))};(0,d.registerPlugin)("vip-workflow-secure-preview",{icon:"vip-workflow",render:()=>{const[r,t]=(0,p.useState)(null);return(0,e.createElement)(a.PluginPostStatusInfo,{className:"vip-workflow-secure-preview"},(0,e.createElement)("div",{className:"vip-workflow-secure-preview-row"},(0,e.createElement)("div",{className:"vip-workflow-secure-preview-label"},(0,c.__)("Secure Preview","vip-workflow")),!r&&(0,e.createElement)(v,{onUrl:e=>t(e)}),r&&(0,e.createElement)(f,{url:r})))}})})()})();
//# sourceMappingURL=secure-preview.js.map