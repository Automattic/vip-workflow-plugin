(()=>{"use strict";var e={1609:e=>{e.exports=window.React},1455:e=>{e.exports=window.wp.apiFetch},4715:e=>{e.exports=window.wp.blockEditor},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},4309:e=>{e.exports=window.wp.editPost},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n},2279:e=>{e.exports=window.wp.plugins}},r={};function t(o){var n=r[o];if(void 0!==n)return n.exports;var i=r[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e=t(1609),r=t(1455),o=t.n(r),n=t(4715),i=t(6427),l=t(7143),s=t(4309),a=t(6087),p=t(7723),c=t(2279);const w=({url:r})=>{const t=(0,a.useRef)(null),o={anchorRef:t,placement:"left-start",offset:36,shift:!0},l="/"+r.split("/").pop();return(0,e.createElement)("div",{ref:t},(0,e.createElement)(i.Dropdown,{popoverProps:o,focusOnMount:!0,renderToggle:({onToggle:r})=>(0,e.createElement)(i.Button,{size:"compact",variant:"tertiary",onClick:r},(0,e.createElement)(i.__experimentalTruncate,{limit:15,ellipsizeMode:"tail"},l)),renderContent:({onClose:t})=>(0,e.createElement)("div",{className:"vip-workflow-secure-link-dropdown-content"},(0,e.createElement)(n.__experimentalInspectorPopoverHeader,{title:(0,p.__)("Secure Preview Link"),onClose:t}),(0,e.createElement)(i.ExternalLink,{className:"editor-post-url__link",href:r,target:"_blank"},r))}))};(0,c.registerPlugin)("vip-workflow-secure-preview",{icon:"vip-workflow",render:()=>{const[r,t]=(0,a.useState)(null);return(0,e.createElement)(s.PluginPostStatusInfo,{className:"vip-workflow-secure-preview"},(0,e.createElement)("div",{className:"vip-workflow-secure-preview-row"},(0,e.createElement)("div",{className:"vip-workflow-secure-preview-label"},(0,p.__)("Secure Preview","vip-workflow")),!r&&(0,e.createElement)(i.Button,{className:"vip-workflow-secure-preview-button",variant:"secondary",onClick:async()=>{let e;try{e=await o()({url:VW_SECURE_PREVIEW.url_generate_preview,method:"POST"})}catch(e){const r=VW_SECURE_PREVIEW.text_preview_error+" "+e.message;(0,l.dispatch)("core/notices").createErrorNotice(r,{id:"vw-secure-preview",isDismissible:!0})}t(e.url)}},(0,p.__)("Generate Link","vip-workflow")),r&&(0,e.createElement)(w,{url:r})))}})})()})();
//# sourceMappingURL=secure-preview.js.map