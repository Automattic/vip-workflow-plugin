(()=>{"use strict";var e,t,a,r,l,n={1366:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(1609),l=a(1455),n=a.n(l),o=a(6427),i=a(6087),s=a(7723),m=a(6870),c=a(9253),d=a(6761);function u({supportedMetadataTypes:e,editorialMetadataTerms:t}){const[a,l]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),[_]=(0,i.useState)(e),[w,E]=(0,i.useState)(t),[f,v]=(0,i.useState)(null),[y,T]=(0,i.useState)(!1),[x,A]=(0,i.useState)(!1),C=(e,t)=>{p(null),l(e),E(f&&!y?w.map((e=>e.term_id===t.term_id?t:e)).sort(((e,t)=>e.name.localeCompare(t.name))):y?w.filter((e=>e.term_id!==t.term_id)).sort(((e,t)=>e.name.localeCompare(t.name))):[...w,t].sort(((e,t)=>e.name.localeCompare(t.name)))),A(!1),T(!1)},h=e=>e.charAt(0).toUpperCase()+e.slice(1),g=(0,r.createElement)(o.__experimentalConfirmDialog,{onConfirm:async()=>{try{await n()({url:VW_EDITORIAL_METADATA_CONFIGURE.url_edit_editorial_metadata+f.term_id,method:"DELETE"}),C((0,s.sprintf)((0,s.__)('Editorial Metadata "%s" deleted successfully.',"vip-workflow"),f.name),f)}catch(e){(e=>{l(null),p(e),T(!1),v(null)})(e.message)}},onCancel:()=>T(!1),isOpen:y,confirmButtonText:(0,s.__)("Proceed with Deletion","vip-workflow")},(0,r.createElement)("p",null,(0,s.sprintf)((0,s.__)('Are you sure you want to delete "%1$s"?',"vip-workflow"),f?.name)),(0,r.createElement)("strong",{style:{display:"block",marginTop:"1rem"}},(0,s.__)("This action can not be undone.","vip-workflow"))),k=(0,r.createElement)(d.A,{availableMetadataTypes:_.map((e=>({value:e,label:h(e)}))),metadata:f,onCancel:()=>A(!1),onSuccess:C});return(0,r.createElement)(r.Fragment,null,a&&(0,r.createElement)(c.A,{successMessage:a,setSuccess:l}),u&&(0,r.createElement)(m.A,{errorMessage:u,setError:p}),(0,r.createElement)(o.Flex,{direction:["column"],justify:"start",align:"start"},(0,r.createElement)(o.FlexItem,null,(0,r.createElement)(o.Button,{variant:"secondary",icon:"plus",onClick:()=>{v(null),A(!0)}})),(0,r.createElement)(o.Flex,{className:"emetadata-items",direction:["column","row"],justify:"start"},w.map((e=>(0,r.createElement)(o.FlexItem,{className:"emetadata-item",key:e.term_id},(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)(o.Flex,{direction:["column"],justify:"start",align:"start"},(0,r.createElement)(o.__experimentalHeading,{level:4},e.name),(0,r.createElement)(o.__experimentalText,null,(0,r.createElement)("i",null,e.description)),(0,r.createElement)(o.__experimentalText,null,h(e.meta.type)))),(0,r.createElement)(o.CardFooter,null,(0,r.createElement)(o.Flex,{direction:["column","row"],justify:"end",align:"end"},(0,r.createElement)("div",{className:"crud-emetadata"},(0,r.createElement)(o.Button,{size:"compact",className:"delete-emetadata",variant:"secondary",icon:"trash",onClick:()=>{v(e),T(!0)},style:{color:"#b32d2e",boxShadow:"inset 0 0 0 1px #b32d2e"}}),(0,r.createElement)(o.Button,{size:"compact",variant:"primary",icon:"edit",onClick:()=>{v(e),A(!0)}})))))))))),g,x&&k)}},6761:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(1609),l=a(1455),n=a.n(l),o=a(6427),i=a(6087),s=a(7723),m=a(6870);function c({availableMetadataTypes:e,metadata:t,onCancel:a,onSuccess:l}){const[c,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(t?.name||""),[_,w]=(0,i.useState)(t?.description||""),[E,f]=(0,i.useState)(t?.meta?.type||e[0].value),[v,y]=(0,i.useState)(!1);let T;return T=t?(0,s.sprintf)((0,s.__)('Edit "%s"',"vip-workflow"),t.name):(0,s.__)("Add New Editorial Metadata","vip-workflow"),(0,r.createElement)(o.Modal,{title:T,size:"medium",onRequestClose:a,closeButtonLabel:(0,s.__)("Cancel","vip-workflow")},c&&(0,r.createElement)(m.A,{errorMessage:c,setError:d}),(0,r.createElement)(o.TextControl,{help:(0,s.__)("The name is used to identify the editorial metadata field.","vip-workflow"),label:(0,s.__)("Name","vip-workflow"),onChange:p,value:u}),(0,r.createElement)(o.TextareaControl,{help:(0,s.__)("The description is primarily for your team to provide context on how the editorial metadata field should be used.","vip-workflow"),label:(0,s.__)("Description","vip-workflow"),onChange:w,value:_}),(0,r.createElement)(o.SelectControl,{help:(0,s.__)("This is to identify the type for the editorial metadata field.","vip-workflow"),label:(0,s.__)("Type","vip-workflow"),value:E,options:e,onChange:f,disabled:null!==t}),(0,r.createElement)(o.Button,{variant:"primary",onClick:async()=>{const e={name:u,description:_,type:E};try{y(!0);const a=await n()({url:VW_EDITORIAL_METADATA_CONFIGURE.url_edit_editorial_metadata+(t?t.term_id:""),method:t?"PUT":"POST",data:e});l(t?(0,s.sprintf)((0,s.__)('Editorial Metadata "%s" updated successfully.',"vip-workflow"),u):(0,s.sprintf)((0,s.__)('Editorial Metadata "%s" added successfully.',"vip-workflow"),u),a)}catch(e){d(e.message)}y(!1)},disabled:v},t?(0,s.__)("Update","vip-workflow"):(0,s.__)("Save","vip-workflow")))}},6870:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(1609),l=a(6427);function n({errorMessage:e,setError:t}){return(0,r.createElement)("div",{style:{marginBottom:"1rem"}},(0,r.createElement)(l.Notice,{status:"error",isDismissible:!0,onRemove:()=>t(null)},(0,r.createElement)("p",null,e)))}},9253:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(1609),l=a(6427);function n({successMessage:e,setSuccess:t}){return(0,r.createElement)("div",{style:{marginBottom:"1rem"}},(0,r.createElement)(l.Notice,{status:"success",isDismissible:!0,onRemove:()=>t(null)},(0,r.createElement)("p",null,e)))}},1609:e=>{e.exports=window.React},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},8490:e=>{e.exports=window.wp.domReady},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return n[e](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=i(1609),t=i(8490),a=i.n(t),r=i(6087),l=i(1366),a()((()=>{const t=document.getElementById("editorial-metadata-manager");t&&(0,r.createRoot)(t).render((0,e.createElement)(l.A,{supportedMetadataTypes:VW_EDITORIAL_METADATA_CONFIGURE.supported_metadata_types,editorialMetadataTerms:VW_EDITORIAL_METADATA_CONFIGURE.editorial_metadata_terms}))}))})();
//# sourceMappingURL=editorial-metadata-configure.js.map