(()=>{"use strict";var e,t,a,r,l,n={6291:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(1609),l=a(6427),n=a(7723);function o({confirmationMessage:e,dataType:t,name:a,onCancel:o,onConfirmDelete:i}){return(0,r.createElement)(l.Modal,{title:(0,n.sprintf)((0,n.__)("Delete %s?","vip-workflow"),a),size:"medium",onRequestClose:o,closeButtonLabel:(0,n.__)("Cancel","vip-workflow")},(0,r.createElement)("p",null,(0,n.sprintf)((0,n.__)('Are you sure you want to delete "%1$s"? %2$s',"vip-workflow"),a,e)),(0,r.createElement)("strong",{style:{display:"block",marginTop:"1rem"}},(0,n.__)("This action can not be undone.","vip-workflow")),(0,r.createElement)(l.Flex,{direction:"row",justify:"flex-end"},(0,r.createElement)(l.Button,{variant:"tertiary",onClick:o},(0,n.__)("Cancel","vip-workflow")),(0,r.createElement)(l.Button,{variant:"primary",onClick:i,style:{background:"#b32d2e"}},(0,n.sprintf)((0,n.__)("Delete this %1$s","vip-workflow"),t))))}},6876:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(6087);function l({success:e}){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=document.querySelector(".vip-workflow-admin h2"),a=document.createElement("span");a.classList.add("vip-workflow-updated-message","vip-workflow-message"),a.style.opacity="0",e.append(a),t.current=a}),[]),(0,r.useEffect)((()=>{e?(t.current.textContent=e,t.current.style.opacity="1"):t.current.style.opacity="0"}),[e]),null}},1366:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(1609),l=a(1455),n=a.n(l),o=a(6427),i=a(6087),s=a(7723),d=a(6761),c=a(6291),m=a(6876);function u({supportedMetadataTypes:e,editorialMetadataTerms:t}){const[a,l]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),[w]=(0,i.useState)(e),[_,f]=(0,i.useState)(t),[E,v]=(0,i.useState)(null),[y,k]=(0,i.useState)(!1),[T,C]=(0,i.useState)(!1),h=e=>{l(null),p(e),C(!1),k(!1),v(null)},A=(e,t)=>{p(null),l(e),f(E&&!y?_.map((e=>e.term_id===t.term_id?t:e)):y?_.filter((e=>e.term_id!==t.term_id)):[..._,t]),C(!1),k(!1)},x=(0,r.createElement)(c.A,{confirmationMessage:"",dataType:"metadata field",name:E?.name,onCancel:()=>k(!1),onConfirmDelete:async()=>{try{await n()({url:VW_EDITORIAL_METADATA_CONFIGURE.url_edit_editorial_metadata+E.term_id,method:"DELETE"}),A((0,s.sprintf)((0,s.__)('Editorial Metadata "%s" deleted successfully.',"vip-workflow"),E.name),E)}catch(e){h(e.message)}}}),g=(0,r.createElement)(d.A,{availableMetadataTypes:w.map((e=>({value:e,label:e}))),metadata:E,onCancel:()=>C(!1),onSuccess:A,onErrorThrown:h});return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(m.A,{success:a}),u&&(0,r.createElement)("div",{style:{marginBottom:"1rem"}},(0,r.createElement)(o.Notice,{status:"error",isDismissible:!0,onRemove:()=>p(null)},(0,r.createElement)("p",null,u))),(0,r.createElement)(o.Flex,{direction:["column"],justify:"start",align:"end"},(0,r.createElement)(o.FlexBlock,null,(0,r.createElement)(o.Button,{variant:"secondary",onClick:()=>{v(null),C(!0)}},(0,s.__)("Add New Metadata","vip-workflow"))),(0,r.createElement)(o.Flex,{className:"emetadata-item",direction:["column","row"],justify:"start",align:"start"},_.map((e=>(0,r.createElement)(o.FlexBlock,{key:e.term_id},(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)(o.Flex,{direction:["column"],justify:"start",align:"start"},(0,r.createElement)(o.__experimentalHeading,{level:4},e.name),(0,r.createElement)(o.__experimentalText,null,(0,r.createElement)("i",null,e.description))),(0,r.createElement)(o.Flex,{direction:["column"],justify:"start",align:"end"},(0,r.createElement)("div",{className:"crud-emetadata"},(0,r.createElement)(o.Button,{className:"delete-emetadata",variant:"secondary",onClick:()=>{v(e),k(!0)},style:{color:"#b32d2e",boxShadow:"inset 0 0 0 1px #b32d2e"}},(0,s.__)("Delete this field","vip-workflow")),(0,r.createElement)(o.Button,{variant:"primary",onClick:()=>{v(e),C(!0)}},(0,s.__)("Edit","vip-workflow"))))))))))),y&&x,T&&g)}},6761:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(1609),l=a(1455),n=a.n(l),o=a(6427),i=a(6087),s=a(7723);function d({availableMetadataTypes:e,metadata:t,onCancel:a,onSuccess:l,onErrorThrown:d}){const[c,m]=(0,i.useState)(t?.name||""),[u,p]=(0,i.useState)(t?.description||""),[w,_]=(0,i.useState)(t?.type||e[0].value),[f,E]=(0,i.useState)(!1);let v;return v=t?(0,s.sprintf)((0,s.__)('Edit "%s"',"vip-workflow"),t.name):(0,s.__)("Add New Editorial Metadata","vip-workflow"),(0,r.createElement)(o.Modal,{title:v,size:"medium",onRequestClose:a,closeButtonLabel:(0,s.__)("Cancel","vip-workflow")},(0,r.createElement)(o.TextControl,{help:(0,s.__)("The name is used to identify the editorial metadata field.","vip-workflow"),label:(0,s.__)("Name","vip-workflow"),onChange:e=>{m(e)},value:c}),(0,r.createElement)(o.TextareaControl,{help:(0,s.__)("The description is primarily for your team to provide context on how the editorial metadata field should be used.","vip-workflow"),label:(0,s.__)("Description","vip-workflow"),onChange:e=>{p(e)},value:u}),(0,r.createElement)(o.SelectControl,{help:(0,s.__)("This is to identify the type for the editorial metadata field.","vip-workflow"),label:(0,s.__)("Type","vip-workflow"),value:w,options:e,onChange:e=>{_(e)}}),(0,r.createElement)(o.Button,{variant:"primary",onClick:async()=>{const e={name:c,description:u,type:w};try{E(!0);const a=await n()({url:VW_EDITORIAL_METADATA_CONFIGURE.url_edit_editorial_metadata+(t?t.term_id:""),method:t?"PUT":"POST",data:e});l(t?(0,s.sprintf)((0,s.__)('Editorial Metadata "%s" updated successfully.',"vip-workflow"),c):(0,s.sprintf)((0,s.__)('Editorial Metadata "%s" added successfully.',"vip-workflow"),c),a)}catch(e){d(e.message)}E(!1)},disabled:f},t?(0,s.__)("Save Changes","vip-workflow"):(0,s.__)("Add Metadata","vip-workflow")))}},1609:e=>{e.exports=window.React},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},8490:e=>{e.exports=window.wp.domReady},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return n[e](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=i(1609),t=i(8490),a=i.n(t),r=i(6087),l=i(1366),a()((()=>{const t=document.getElementById("editorial-metadata-manager");t&&(0,r.createRoot)(t).render((0,e.createElement)(l.A,{supportedMetadataTypes:VW_EDITORIAL_METADATA_CONFIGURE.supported_metadata_types,editorialMetadataTerms:VW_EDITORIAL_METADATA_CONFIGURE.editorial_metadata_terms}))}))})();
//# sourceMappingURL=editorial-metadata-configure.js.map