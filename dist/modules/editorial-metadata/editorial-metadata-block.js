(()=>{"use strict";var e={8053:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(5573),o=a(4848);const n=(0,o.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(r.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})},1020:(e,t,a)=>{var r=a(1609),o=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var r,s={},d=null,c=null;for(r in void 0!==a&&(d=""+a),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,r)&&!i.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:o,type:e,key:d,ref:c,props:s,_owner:l.current}}},4848:(e,t,a)=>{e.exports=a(1020)},1609:e=>{e.exports=window.React},6427:e=>{e.exports=window.wp.components},9491:e=>{e.exports=window.wp.compose},7143:e=>{e.exports=window.wp.data},8443:e=>{e.exports=window.wp.date},4309:e=>{e.exports=window.wp.editPost},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n},2279:e=>{e.exports=window.wp.plugins},5573:e=>{e.exports=window.wp.primitives}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(1609),t=a(6427),r=a(9491),o=a(7143),n=a(8443),l=a(4309),i=a(6087),s=a(7723),d=a(8053),c=a(2279);const m=window.VW_EDITORIAL_METADATA.editorial_metadata_terms.map((e=>({key:e.meta.postmeta_key,label:e.name,type:e.meta.type,term_id:e.term_id,description:e.description}))),p=0!==m.length,u=({editorialMetadata:a,metaFields:r,setMetaFields:o})=>(0,e.createElement)(t.__experimentalHStack,{__nextHasNoMarginBottom:!0},(0,e.createElement)("label",{id:"editorial-metadata-label",title:a.description},a.label),(0,e.createElement)(t.ToggleControl,{__nextHasNoMarginBottom:!0,checked:r?.[a.key],onChange:e=>o({...r,[a.key]:e})})),_=({popoverAnchor:e,text:t})=>(0,i.useMemo)((()=>({anchor:e,"aria-label":t,placement:"left-start",offset:36,shift:!0})),[e]),w=({editorialMetadata:a,label:r,onToggle:o,isOpen:n,shouldTruncate:l})=>(0,e.createElement)(t.__experimentalHStack,{__nextHasNoMarginBottom:!0},(0,e.createElement)("label",{id:"editorial-metadata-label",title:a.description},a.label),(0,e.createElement)(t.Button,{style:{whiteSpace:"normal"},size:"compact",variant:"tertiary",onClick:o,"aria-label":a.label,"aria-expanded":n},l?(0,e.createElement)(t.__experimentalTruncate,{limit:15,ellipsizeMode:"tail"},r):r)),g=({editorialMetadata:a,metaFields:r,setMetaFields:o})=>{const[n,l]=(0,i.useState)(null),c=_({popoverAnchor:n,text:(0,s.__)("Enter Text")}),m=r?.[a.key]||(0,s.__)("None");return(0,e.createElement)(t.Dropdown,{ref:l,popoverProps:c,focusOnMount:!0,renderToggle:({onToggle:e,isOpen:t})=>w({editorialMetadata:a,label:m,onToggle:e,isOpen:t,shouldTruncate:!0}),renderContent:({onClose:n})=>(0,e.createElement)(t.Flex,{direction:["column"],justify:"start",align:"centre",className:"vip-workflow-text-popover"},(0,e.createElement)(t.Flex,{direction:["row"],justify:"start",align:"end"},(0,e.createElement)(t.__experimentalHeading,{level:2,size:13},a.label),(0,e.createElement)(t.Flex,{direction:["row"],justify:"end",align:"end"},(0,e.createElement)(t.Button,{label:(0,s.__)("Close"),icon:d.A,onClick:n}))),(0,e.createElement)(t.TextControl,{__nextHasNoMarginBottom:!0,value:r?.[a.key],onChange:e=>{o({...r,[a.key]:e})}}),(0,e.createElement)(t.Flex,{direction:["row"],justify:"end",align:"end"},(0,e.createElement)(t.Button,{label:(0,s.__)("Clear"),variant:"tertiary",onClick:()=>{o({...r,[a.key]:""}),n()}},(0,s.__)("Clear"))))})},f=({editorialMetadata:a,metaFields:r,setMetaFields:o})=>{const[l,c]=(0,i.useState)(null),m=_({popoverAnchor:l,text:(0,s.__)("Select date")});let p=r?.[a.key];const u=(0,n.getSettings)(),g=/a(?!\\)/i.test(u.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return p=p?y({dateAttribute:p}):(0,s.__)("None"),(0,e.createElement)(t.Dropdown,{ref:c,popoverProps:m,focusOnMount:!0,renderToggle:({onToggle:e,isOpen:t})=>w({editorialMetadata:a,label:p,onToggle:e,isOpen:t,shouldTruncate:!1}),renderContent:({onClose:n})=>{var l;return(0,e.createElement)(t.Flex,{direction:["column"],justify:"start",align:"centre"},(0,e.createElement)(t.Flex,{direction:["row"],justify:"start",align:"end"},(0,e.createElement)(t.__experimentalHeading,{level:2,size:13},a.label),(0,e.createElement)(t.Flex,{direction:["row"],justify:"end",align:"end"},(0,e.createElement)(t.Button,{label:(0,s.__)("Now"),variant:"tertiary",onClick:()=>{o({...r,[a.key]:new Date})}},(0,s.__)("Now")),(0,e.createElement)(t.Button,{label:(0,s.__)("Close"),icon:d.A,onClick:n}))),(0,e.createElement)(t.DateTimePicker,{currentDate:null!==(l=r?.[a.key])&&void 0!==l?l:void 0,value:r?.[a.key],is12Hour:g,onChange:e=>o({...r,[a.key]:e}),onClose:n}),(0,e.createElement)(t.Flex,{direction:["row"],justify:"end",align:"end"},(0,e.createElement)(t.Button,{label:(0,s.__)("Clear"),variant:"tertiary",onClick:()=>{o({...r,[a.key]:""}),n()}},(0,s.__)("Clear"))))}})},y=({dateAttribute:e})=>{const t=(0,n.getDate)(e),a=(()=>{const{timezone:e}=(0,n.getSettings)();return e.abbr&&isNaN(Number(e.abbr))?e.abbr:`UTC${e.offset<0?"":"+"}${e.offsetFormatted}`})(),r=(0,n.dateI18n)(
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
(0,s._x)("F j, Y g:iÂ a","full date format"),t);return(0,s.isRTL)()?`${a} ${r}`:`${r} ${a}`},x=(0,r.compose)((0,o.withSelect)((e=>({metaFields:e("core/editor").getEditedPostAttribute("meta")}))),(0,o.withDispatch)((e=>({setMetaFields(t){e("core/editor").editPost({meta:t})}}))))((({metaFields:a,setMetaFields:r})=>(0,e.createElement)(l.PluginPostStatusInfo,{className:"vip-workflow-editorial-metadata"},(0,e.createElement)("div",{className:"vip-workflow-editorial-metadata-row"},(0,e.createElement)(t.__experimentalDivider,null),(0,e.createElement)(t.__experimentalVStack,{spacing:4},p&&m.map((t=>((t,a,r)=>{switch(t.type){case"checkbox":return(0,e.createElement)(u,{key:t.key,editorialMetadata:t,metaFields:a,setMetaFields:r});case"text":return(0,e.createElement)(g,{key:t.key,editorialMetadata:t,metaFields:a,setMetaFields:r});case"date":return(0,e.createElement)(f,{key:t.key,editorialMetadata:t,metaFields:a,setMetaFields:r});default:return null}})(t,a,r))))))));(0,c.registerPlugin)("vip-workflow-editorial-metadata",{render:x,icon:"vip-workflow"})})()})();
//# sourceMappingURL=editorial-metadata-block.js.map